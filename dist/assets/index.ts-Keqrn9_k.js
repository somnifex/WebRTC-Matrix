import{S as i,b as l}from"./storage-BF9_fGL3.js";class r{static async applyGlobalPolicy(){const o=(await i.getSettings()).globalPolicy;console.log(`[PrivacyBlocker] Applying global policy: ${o}`),chrome.privacy&&chrome.privacy.network&&chrome.privacy.network.webRTCIPHandlingPolicy?chrome.privacy.network.webRTCIPHandlingPolicy.set({value:o},()=>{chrome.runtime.lastError?console.error("[PrivacyBlocker] Error setting policy:",chrome.runtime.lastError):console.log("[PrivacyBlocker] Policy set successfully.")}):console.warn("[PrivacyBlocker] privacy.network.webRTCIPHandlingPolicy API not available.")}static init(){this.applyGlobalPolicy(),l.storage.onChanged.addListener((e,o)=>{o==="local"&&e.settings&&this.applyGlobalPolicy()})}}console.log("WebRTC Matrix: Background service worker started.");l.runtime.onInstalled.addListener(async()=>{console.log("WebRTC Matrix: Extension installed/updated."),await i.init(),r.init()});r.init();
